{"ast":null,"code":"import React,{useState}from'react';import'./LoanForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoanForm(_ref){let{books,users,loans,onLoanAction}=_ref;const[selectedBookId,setSelectedBookId]=useState('');const[selectedUserId,setSelectedUserId]=useState('');const handleBorrow=async()=>{if(!selectedBookId||!selectedUserId){alert('Please select a book and a user to borrow.');return;}await onLoanAction({bookId:selectedBookId,userId:selectedUserId,type:'borrow'});setSelectedBookId('');setSelectedUserId('');};const handleReturn=async loanId=>{await onLoanAction({loanId:loanId,type:'return'});};const availableBooks=books.filter(book=>book.availableQuantity>0);const activeLoans=loans.filter(loan=>loan.status==='BORROWED');return/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Loans\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Borrow Book\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-form\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedBookId,onChange:e=>setSelectedBookId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a Book\"}),availableBooks.map(book=>/*#__PURE__*/_jsxs(\"option\",{value:book.id,children:[book.title,\" (\",book.availableQuantity,\" available)\"]},book.id))]}),/*#__PURE__*/_jsxs(\"select\",{value:selectedUserId,onChange:e=>setSelectedUserId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a User\"}),users.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user.id,children:user.name},user.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBorrow,children:\"Borrow\"})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Active Loans\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:activeLoans.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No active loans.\"}):activeLoans.map(loan=>{const book=books.find(b=>b.id===loan.bookId);const user=users.find(u=>u.id===loan.userId);return/*#__PURE__*/_jsxs(\"li\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[book?book.title:'Unknown Book',\" by \",user?user.name:'Unknown User',\"(Loan Date: \",new Date(loan.loanDate).toLocaleDateString(),\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReturn(loan.id),children:\"Return\"})]},loan.id);})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Loan History\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list\",children:loans.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No loan history.\"}):loans.map(loan=>{const book=books.find(b=>b.id===loan.bookId);const user=users.find(u=>u.id===loan.userId);return/*#__PURE__*/_jsx(\"li\",{className:\"item loan-history-item\",children:/*#__PURE__*/_jsxs(\"span\",{children:[book?book.title:'Unknown Book',\" by \",user?user.name:'Unknown User',\"(Status: \",loan.status,\", Loan Date: \",new Date(loan.loanDate).toLocaleDateString(),loan.returnDate&&`, Return Date: ${new Date(loan.returnDate).toLocaleDateString()}`,\")\"]})},loan.id);})})]});}export default LoanForm;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","LoanForm","_ref","books","users","loans","onLoanAction","selectedBookId","setSelectedBookId","selectedUserId","setSelectedUserId","handleBorrow","alert","bookId","userId","type","handleReturn","loanId","availableBooks","filter","book","availableQuantity","activeLoans","loan","status","className","children","value","onChange","e","target","map","id","title","user","name","onClick","length","find","b","u","Date","loanDate","toLocaleDateString","returnDate"],"sources":["/home/sumit-linux/library-mgmt/library-frontend/src/components/LoanForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './LoanForm.css';\n\nfunction LoanForm({ books, users, loans, onLoanAction }) {\n  const [selectedBookId, setSelectedBookId] = useState('');\n  const [selectedUserId, setSelectedUserId] = useState('');\n\n  const handleBorrow = async () => {\n    if (!selectedBookId || !selectedUserId) {\n      alert('Please select a book and a user to borrow.');\n      return;\n    }\n    await onLoanAction({ bookId: selectedBookId, userId: selectedUserId, type: 'borrow' });\n    setSelectedBookId('');\n    setSelectedUserId('');\n  };\n\n  const handleReturn = async (loanId) => {\n    await onLoanAction({ loanId: loanId, type: 'return' });\n  };\n\n  const availableBooks = books.filter(book => book.availableQuantity > 0);\n  const activeLoans = loans.filter(loan => loan.status === 'BORROWED');\n\n  return (\n    <div className=\"section\">\n      <h2>Loans</h2>\n\n      <h3>Borrow Book</h3>\n      <div className=\"loan-form\">\n        <select value={selectedBookId} onChange={(e) => setSelectedBookId(e.target.value)}>\n          <option value=\"\">Select a Book</option>\n          {availableBooks.map(book => (\n            <option key={book.id} value={book.id}>{book.title} ({book.availableQuantity} available)</option>\n          ))}\n        </select>\n        <select value={selectedUserId} onChange={(e) => setSelectedUserId(e.target.value)}>\n          <option value=\"\">Select a User</option>\n          {users.map(user => (\n            <option key={user.id} value={user.id}>{user.name}</option>\n          ))}\n        </select>\n        <button onClick={handleBorrow}>Borrow</button>\n      </div>\n\n      <h3>Active Loans</h3>\n      <ul className=\"list\">\n        {activeLoans.length === 0 ? <p>No active loans.</p> :\n          activeLoans.map(loan => {\n            const book = books.find(b => b.id === loan.bookId);\n            const user = users.find(u => u.id === loan.userId);\n            return (\n              <li key={loan.id} className=\"item\">\n                <span>\n                  {book ? book.title : 'Unknown Book'} by {user ? user.name : 'Unknown User'}\n                  (Loan Date: {new Date(loan.loanDate).toLocaleDateString()})\n                </span>\n                <button onClick={() => handleReturn(loan.id)}>Return</button>\n              </li>\n            );\n          })\n        }\n      </ul>\n\n      <h3>Loan History</h3>\n      <ul className=\"list\">\n        {loans.length === 0 ? <p>No loan history.</p> :\n          loans.map(loan => {\n            const book = books.find(b => b.id === loan.bookId);\n            const user = users.find(u => u.id === loan.userId);\n            return (\n              <li key={loan.id} className=\"item loan-history-item\">\n                <span>\n                  {book ? book.title : 'Unknown Book'} by {user ? user.name : 'Unknown User'}\n                  (Status: {loan.status}, Loan Date: {new Date(loan.loanDate).toLocaleDateString()}\n                  {loan.returnDate && `, Return Date: ${new Date(loan.returnDate).toLocaleDateString()}`})\n                </span>\n              </li>\n            );\n          })\n        }\n      </ul>\n    </div>\n  );\n}\n\nexport default LoanForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}